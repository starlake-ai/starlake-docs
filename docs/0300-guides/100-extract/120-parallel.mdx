---
title: "Parallel Data Extraction with Starlake (numPartitions)"
description: "Speed up Starlake database extraction using parallel mode. Configure numPartitions and partitionColumn for concurrent JDBC reads. Compatible with incremental extraction."
keywords: [starlake, parallel extraction, numPartitions, partitionColumn, performance, JDBC]
---

import Head from '@docusaurus/Head';

<Head>
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How does parallel extraction work in Starlake?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Parallel extraction divides the reading of a table into multiple partitions executed simultaneously. The column specified in partitionColumn is used to split the data, and numPartitions defines the number of concurrent reads."
          }
        },
        {
          "@type": "Question",
          "name": "Is the numPartitions parameter required?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. The default value is 1 (no parallelism). Increasing this value activates parallel extraction."
          }
        },
        {
          "@type": "Question",
          "name": "What are the prerequisites for parallel extraction?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The database must support concurrent read-write connections. The partitionColumn parameter must be defined."
          }
        },
        {
          "@type": "Question",
          "name": "Can I use parallel and incremental extraction at the same time?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. When fullExport: false and numPartitions > 1, the same partitionColumn is used for both parallel partitioning and incremental tracking."
          }
        },
        {
          "@type": "Question",
          "name": "What type of column should I use for partitionColumn in parallel mode?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A monotonically increasing numeric column (auto-increment ID, sequence) is recommended. Timestamps can also work."
          }
        }
      ]
    })}
  </script>
</Head>

<Head>
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Enable Parallel Extraction in Starlake",
      "description": "Configure Starlake to read a database table in parallel by setting numPartitions and partitionColumn in the extraction YAML.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Choose a partition column",
          "text": "Select a monotonically increasing numeric column (auto-increment ID or sequence). Timestamps can also work.",
          "position": 1
        },
        {
          "@type": "HowToStep",
          "name": "Set partitionColumn in the YAML",
          "text": "Add partitionColumn with the column name in the table entry of the extraction YAML.",
          "position": 2
        },
        {
          "@type": "HowToStep",
          "name": "Set numPartitions",
          "text": "Add numPartitions with the desired level of parallelism (e.g., 4). The default is 1 (no parallelism).",
          "position": 3
        },
        {
          "@type": "HowToStep",
          "name": "Run the extraction",
          "text": "Execute starlake extract-data --config my_extract_config --outputDir $SL_ROOT/incoming/. Starlake splits the read into numPartitions concurrent JDBC queries.",
          "position": 4
        }
      ]
    })}
  </script>
</Head>

# Parallel Data Extraction with Starlake (numPartitions)

Starlake parallel extraction splits a table read into multiple concurrent JDBC queries to reduce extraction time. It requires setting `numPartitions` (the number of concurrent reads) and `partitionColumn` (the column used to split the data). Parallel extraction can be combined with incremental mode by also setting `fullExport: false`.

## How to Enable Parallel Extraction

1. **Choose a partition column** -- Select a monotonically increasing numeric column (auto-increment ID or sequence). Timestamps can also work.
2. **Set `partitionColumn`** -- Add `partitionColumn` with the column name in the table entry of the extraction YAML.
3. **Set `numPartitions`** -- Add `numPartitions` with the desired level of parallelism (e.g., 4). The default is 1 (no parallelism).
4. **Run the extraction** -- Execute `starlake extract-data --config my_extract_config --outputDir $SL_ROOT/incoming/`. Starlake splits the read into `numPartitions` concurrent JDBC queries.

:::info

Parallel extraction is available only on databases that support concurrent read-write connections.

:::


```yaml {8,9,10} title="metadata/extract/my_extract_config.sl.yml"
version: 1
extract:
  connectionRef: "duckdb" # The database connection to use
  jdbcSchemas:
    - schema: "starbake"
      tables:
        - name: "order"               # table names or  "*" to extract all tables
          fullExport: true            # (optional) set to false to use incremental extraction
          partitionColumn: "order_id" # (optional) column to use for partitioning
          numPartitions: 4            # Level of parallelism (defaults to 1 aka no parallelism)
  ...
```

Note that when using parallel extraction,
- the `partitionColumn` attribute must be set to the column to use for partitioning and
- the `numPartitions` attribute must be set to the number of partitions to use.


If incremental extraction is used (fullExport set to false),
the partitionColumn used for parallel extraction is also the column used for incremental extraction:

```yaml {8,9,10} title="metadata/extract/my_extract_config.sl.yml"
version: 1
extract:
  connectionRef: "duckdb" # The database connection to use
  jdbcSchemas:
    - schema: "starbake"
      tables:
        - name: "order"               # table names or  "*" to extract all tables
          fullExport: false            # (optional) set to false to use incremental extraction
          partitionColumn: "order_id" # (optional) column to use for partitioning
          numPartitions: 4            # Level of parallelism (defaults to 1 aka no parallelism)
  ...
```

## Frequently Asked Questions

### How does parallel extraction work in Starlake?
Parallel extraction divides the reading of a table into multiple partitions executed simultaneously. The column specified in `partitionColumn` is used to split the data, and `numPartitions` defines the number of concurrent reads.

### Is the numPartitions parameter required?
No. The default value is 1 (no parallelism). Increasing this value activates parallel extraction.

### What are the prerequisites for parallel extraction?
The database must support concurrent read-write connections. The `partitionColumn` parameter must be defined.

### Can I use parallel and incremental extraction at the same time?
Yes. When `fullExport: false` and `numPartitions > 1`, the same `partitionColumn` is used for both parallel partitioning and incremental tracking.

### What type of column should I use for partitionColumn in parallel mode?
A monotonically increasing numeric column (auto-increment ID, sequence) is recommended. Timestamps can also work.
