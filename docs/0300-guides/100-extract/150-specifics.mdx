---
title: "Database-Specific Extraction Settings: DB2, Oracle, SQL Server"
description: "Configure Starlake schema extraction for DB2, Oracle, and SQL Server. Extract column and table comments using columnRemarks and tableRemarks SQL queries with template placeholders."
keywords: [starlake, DB2, Oracle, SQL Server, schema extraction, column remarks, database comments, columnRemarks, tableRemarks]
---

import Head from '@docusaurus/Head';

<Head>
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Which databases require special configuration for comment extraction in Starlake?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "DB2, Oracle, and SQL Server require configuring columnRemarks and tableRemarks in the extraction YAML file. MySQL and PostgreSQL retrieve comments via standard JDBC metadata without extra configuration."
          }
        },
        {
          "@type": "Question",
          "name": "How do the {{schema}} and {{table}} placeholders work?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "These are substitution variables. Starlake automatically replaces them with the schema name and table name being extracted at runtime when executing the SQL query."
          }
        },
        {
          "@type": "Question",
          "name": "Where are column comments stored in DB2?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "DB2 stores column descriptions in SYSIBM.SQLCOLUMNS (COLUMN_TEXT field) and table descriptions in QSYS2.SYSTABLES (TABLE_TEXT field)."
          }
        },
        {
          "@type": "Question",
          "name": "Where are column comments stored in Oracle?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Oracle uses ALL_COL_COMMENTS for column comments and ALL_TAB_COMMENTS for table comments. Schema and table names are typically uppercase."
          }
        },
        {
          "@type": "Question",
          "name": "Where are column comments stored in SQL Server?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "SQL Server uses sys.extended_properties with the MS_Description property for column and table descriptions."
          }
        },
        {
          "@type": "Question",
          "name": "Is it mandatory to configure columnRemarks and tableRemarks?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. These fields are optional. They are only needed if you want to extract comments/descriptions in addition to the table schema."
          }
        }
      ]
    })}
  </script>
</Head>

# Database-Specific Extraction Settings: DB2, Oracle, SQL Server

Starlake schema extraction can retrieve table and column comments from databases that store them outside standard JDBC metadata. DB2, Oracle, and SQL Server each require custom SQL queries configured via the `columnRemarks` and `tableRemarks` fields in the extraction YAML. MySQL and PostgreSQL do not need this extra configuration because their JDBC drivers expose comments through standard metadata calls.

You can specify the location of the comments in the `columnRemarks` and `tableRemarks` sections of the configuration file.
These fields accept SQL queries with `{{schema}}` and `{{table}}` placeholders that Starlake substitutes at runtime.


import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


<Tabs groupId="databases">
<TabItem value="db2" label="DB2">

DB2 stores column and table descriptions in system catalog tables (`SYSIBM.SQLCOLUMNS` and `QSYS2.SYSTABLES`).

```yaml title="metadata/extract/db2_extract.sl.yml"
extract:
  connectionRef: "my_db2_connection"
  jdbcSchemas:
    - schema: "starbake"
      columnRemarks: SELECT COLUMN_NAME, COLUMN_TEXT FROM "SYSIBM"."SQLCOLUMNS" WHERE TABLE_SCHEM = '{{schema}}' AND TABLE_NAME = '{{table}}'
      tableRemarks: SELECT TABLE_TEXT FROM QSYS2.SYSTABLES WHERE TABLE_SCHEMA = '{{schema}}' AND TABLE_NAME = '{{table}}'
      ...
```
</TabItem>

<TabItem value="oracle" label="Oracle">

Oracle stores comments in `ALL_TAB_COMMENTS` and `ALL_COL_COMMENTS`.

```yaml title="metadata/extract/oracle_extract.sl.yml"
extract:
  connectionRef: "my_oracle_connection"
  jdbcSchemas:
    - schema: "STARBAKE"
      columnRemarks: SELECT COLUMN_NAME, COMMENTS FROM ALL_COL_COMMENTS WHERE OWNER = '{{schema}}' AND TABLE_NAME = '{{table}}'
      tableRemarks: SELECT COMMENTS FROM ALL_TAB_COMMENTS WHERE OWNER = '{{schema}}' AND TABLE_NAME = '{{table}}'
      ...
```

:::note
Oracle schema and table names are typically uppercase. Make sure the `schema` value in your configuration matches the case used in the database.
:::

</TabItem>

<TabItem value="sqlserver" label="SQL Server">

SQL Server stores extended properties (including descriptions) via `sys.extended_properties`. The `MS_Description` property is the conventional name for table and column comments.

```yaml title="metadata/extract/sqlserver_extract.sl.yml"
extract:
  connectionRef: "my_sqlserver_connection"
  jdbcSchemas:
    - schema: "dbo"
      columnRemarks: >
        SELECT c.name AS COLUMN_NAME, CAST(ep.value AS NVARCHAR(MAX)) AS COLUMN_TEXT
        FROM sys.columns c
        JOIN sys.tables t ON c.object_id = t.object_id
        JOIN sys.schemas s ON t.schema_id = s.schema_id
        LEFT JOIN sys.extended_properties ep ON ep.major_id = c.object_id AND ep.minor_id = c.column_id AND ep.name = 'MS_Description'
        WHERE s.name = '{{schema}}' AND t.name = '{{table}}'
      tableRemarks: >
        SELECT CAST(ep.value AS NVARCHAR(MAX)) AS TABLE_TEXT
        FROM sys.tables t
        JOIN sys.schemas s ON t.schema_id = s.schema_id
        LEFT JOIN sys.extended_properties ep ON ep.major_id = t.object_id AND ep.minor_id = 0 AND ep.name = 'MS_Description'
        WHERE s.name = '{{schema}}' AND t.name = '{{table}}'
      ...
```

</TabItem>
</Tabs>

## Frequently Asked Questions

### Which databases require special configuration for comment extraction in Starlake?
DB2, Oracle, and SQL Server require configuring `columnRemarks` and `tableRemarks` in the extraction YAML file. MySQL and PostgreSQL retrieve comments via standard JDBC metadata without extra configuration.

### How do the {{schema}} and {{table}} placeholders work?
These are substitution variables. Starlake automatically replaces them with the schema name and table name being extracted at runtime when executing the SQL query.

### Where are column comments stored in DB2?
DB2 stores column descriptions in `SYSIBM.SQLCOLUMNS` (`COLUMN_TEXT` field) and table descriptions in `QSYS2.SYSTABLES` (`TABLE_TEXT` field).

### Where are column comments stored in Oracle?
Oracle uses `ALL_COL_COMMENTS` for column comments and `ALL_TAB_COMMENTS` for table comments. Schema and table names are typically uppercase.

### Where are column comments stored in SQL Server?
SQL Server uses `sys.extended_properties` with the `MS_Description` property for column and table descriptions.

### Is it mandatory to configure columnRemarks and tableRemarks?
No. These fields are optional. They are only needed if you want to extract comments/descriptions in addition to the table schema.
