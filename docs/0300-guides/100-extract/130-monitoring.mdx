---
title: "Monitor Data Extractions in Starlake"
description: "Track and monitor Starlake data extractions using the SL_LAST_EXPORT audit table. Verify export status, timestamps, and troubleshoot issues."
keywords: [starlake, monitoring, SL_LAST_EXPORT, audit, extraction tracking, observability]
---

# Monitoring

Starlake keeps track of the successive extractions in the table `SL_LAST_EXPORT` located in the audit schema (`audit` by default).

The connection to the audit schema is defined in the `metadata/application.sl.yml` file.

```yaml
version: 1
application:
  audit:
    domain: "audit" # Schema name
    sink:
      connectionRef: "audit_connection" # Connection to the audit schema

  connections:
    audit_connection:
      type: "jdbc"
      options:
        url: "jdbc:duckdb:{{SL_ROOT}}/datasets/duckdb.db" # Location of the DuckDB database
        driver: "org.duckdb.DuckDBDriver"
    ...
```

## SL_LAST_EXPORT Table Schema

The `SL_LAST_EXPORT` table stores the state of each extraction. Its main columns are:

| Column | Type | Description |
|--------|------|-------------|
| `domain` | VARCHAR | The schema name (e.g., `starbake`) |
| `schema` | VARCHAR | The table name that was extracted |
| `last_ts` | TIMESTAMP | Timestamp of the last extraction run |
| `last_date` | VARCHAR | Date string of the last extraction |
| `last_long` | BIGINT | Last exported value of the partition column (for incremental extractions) |
| `last_string` | VARCHAR | Last exported string value of the partition column |
| `mode` | VARCHAR | Extraction mode (`FULL` or `INCREMENTAL`) |
| `count` | BIGINT | Number of rows extracted in the last run |
| `success` | BOOLEAN | Whether the extraction completed successfully |
| `message` | VARCHAR | Error or status message |
| `step` | VARCHAR | The extraction step |

## Querying the Last Export

You can query the audit table directly to verify the status of your extractions:

```sql
-- Check the last export for all tables in the starbake schema
SELECT domain, schema, last_ts, last_long, mode, count, success
FROM audit.SL_LAST_EXPORT
WHERE domain = 'starbake'
ORDER BY last_ts DESC;
```

```sql
-- Find failed extractions in the last 24 hours
SELECT domain, schema, last_ts, message
FROM audit.SL_LAST_EXPORT
WHERE success = false
  AND last_ts >= CURRENT_TIMESTAMP - INTERVAL '24 hours';
```

## Monitoring Use Case

A typical monitoring workflow is to schedule a check after each extraction pipeline run:

1. **Run the extraction** via `starlake extract-data`.
2. **Query `SL_LAST_EXPORT`** to confirm all expected tables were extracted successfully.
3. **Alert on failures** -- if any row has `success = false`, trigger a notification to your ops team.
4. **Track row counts over time** -- sudden drops in `count` may indicate source data issues or connectivity problems.

