---
title: "Autoload — Zero-Config Data Loading"
description: "Starlake autoload detects CSV, JSON, and XML file formats, infers schemas, and loads data into your warehouse with zero configuration. Learn naming conventions, directory structure, and format detection rules."
keywords: [starlake, autoload, zero-config, schema inference, data loading, file detection, CSV, JSON, XML, directory structure]
---

import Head from '@docusaurus/Head';

<Head>
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How does Starlake autoload detect the file format?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Autoload uses the file extension (.csv, .json, .xml, .psv, .dsv) and inspects the first line of the file to detect the separator and column count. For JSON, it checks if the file starts with [ (array) or { (object)."
          }
        },
        {
          "@type": "Question",
          "name": "How does autoload decide between APPEND and OVERWRITE mode?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Files with a date/time suffix (e.g., order_20240228.csv) are loaded in APPEND mode. Files without a suffix are loaded in OVERWRITE mode."
          }
        },
        {
          "@type": "Question",
          "name": "What happens to files that do not match any expected pattern?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Files whose names do not match a valid pattern are moved to the datasets/unresolved/ directory. They are not loaded."
          }
        },
        {
          "@type": "Question",
          "name": "What is the difference between a domain and a schema in Starlake?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "In Starlake, 'domain' refers to what databases call a schema, catalog, or dataset (depending on the engine). The folder name under incoming/ becomes the domain name."
          }
        },
        {
          "@type": "Question",
          "name": "Where does autoload store inferred schema files?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Schema files are generated under metadata/load/<domain>/. Each table gets a <table>.sl.yml file, and the domain gets a _config.sl.yml file."
          }
        },
        {
          "@type": "Question",
          "name": "What directory structure does autoload create?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Autoload uses directories under datasets/: incoming (source), stage (pre-load), ingesting (during load), archive (after load), replay (invalid records), and unresolved (unmatched files)."
          }
        }
      ]
    })}
  </script>
</Head>

<Head>
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Use Starlake Autoload to Load Files Without Configuration",
      "description": "Load CSV, JSON, and XML files into your data warehouse with zero configuration using Starlake autoload.",
      "step": [
        {
          "@type": "HowToStep",
          "position": 1,
          "name": "Place files in the incoming directory",
          "text": "Copy your CSV, JSON, or XML files into $SL_ROOT/incoming/<domain>/. The folder name becomes the database schema."
        },
        {
          "@type": "HowToStep",
          "position": 2,
          "name": "Name files according to conventions",
          "text": "Name each file after its target table. Add a date suffix for incremental (APPEND) loading, e.g., order_20240228.csv."
        },
        {
          "@type": "HowToStep",
          "position": 3,
          "name": "Run the autoload command",
          "text": "Execute 'starlake autoload'. Starlake detects formats, infers schemas, stages files, and loads them into the target warehouse."
        },
        {
          "@type": "HowToStep",
          "position": 4,
          "name": "Review inferred schemas",
          "text": "Check generated YAML files in metadata/load/<domain>/ and customize column types, validation rules, or write strategies as needed."
        }
      ]
    })}
  </script>
</Head>

# Autoload: Zero-Config File Loading into Your Data Warehouse

Starlake autoload is a zero-configuration command that detects CSV, JSON, and XML file formats, infers target table schemas, and loads data into your warehouse in a single step. It uses file naming conventions and directory structure to determine the target domain and table. Autoload handles file staging, validation, and archiving automatically.

:::note
Datawarehouses are organized around schemas where tables are grouped.
Depending on the database, a database `schema` can be called `schema` or `catalog` or `dataset`.
In starlake, we use the term `domain` to designate  a `schema`, `catalog` or `dataset`.
:::

The conventions used by the autoload command are:
- files are stored under the incoming directory and named after the domain and table they are loaded into: `$SL_ROOT/incoming/<domain>/<table><suffix>.<extension>`
- The target schema is named after the domain names
- The target tables are named after the file name without the extension or suffix.
- The suffix is used to differentiate between files that are loaded in full `overwrite` mode and those loaded in `append` mode.
For example `order_20240228.json` and `order_line_20240228.csv` are respectively loaded into the same table `order` and `order_line`.

```plaintext title="directory structure example before running autoload"
incoming
└── starbake
    ├── product.xml
    ├── order_20240228.csv
    └── order_line_20240228.csv
```
<br/>

After running the `autoload` command:
```shell
starlake autoload
```
<br/>

Since we did not specify the target datawarehouse but the local filesystem as the target, the directory structure will be updated as follows.

In real life, the target datawarehouse will be a database and the tables will be created in the target database.

```plaintext title="table schemas inferred from the directory structure"
metadata/load
└── starbake
    ├── _config.sl.yml
    ├── product.sl.yml
    └── order.sl.yml
datasets/
├── archive         # files are moved to the archive directory after being loaded
│   └── starbake
├── ingesting       # files are moved to the ingesting directory before being loaded
│   └── starbake
├── replay          # invalid records that need to be replayed are moved
│   └── starbake    # in the  replay directory
├── stage           # files are moved to the stage directory before being loaded
│   └── starbake
├── unresolved      # filenames that do not match a valid pattern are moved to the unresolved directory.
└──incoming
    └── starbake
        ├── product.xml
        ├── order_20240228.csv
        └── order_line_20240228.csv

```

<br/>


- The `_config.sl.yml` file is a configuration file that contains the domain configuration and describe how the domain will be created in the target database.

- The `<table>.sl.yml` file contains the table configuration and describes how files are parsed, validated and loaded into the target database.



## How Autoload Detects File Format (CSV, JSON, XML)

- It expects the file to be named after the table it will be loaded into.
- It uses the file extension to detect the format of the file. The supported formats are `csv`,`psv`,`dsv`, `json`, `xml`
- It uses the first line of the file to detect the separator and the number of columns.
- In the case of CSV files, it uses the first line of the file to detect the column names.
- It uses the whole file content to detect the column types.
- In the case of JSON file, it is a considered a JSON_ARRAY file if the first character is `[` and a JSON file if the first character is `{`.
- In the case of XML file, it uses the first line of the file to detect the root element and the number of columns.

XML files are expected to have the following structure:
<br/>

```xml
<?xml> # optional xml declaration
<myroot>
    <myrecord attr1="value1" >
        <column1>value1</column1>
        <column2>value2</column2>
        ...
    </myrecord>
<myroot>

```

## Running Autoload with Spark Locally

When running against Spark Locally, the tables are created in the `datasets` directory.
When running against a real datawarehouse, the tables are created in the target database.

```shell title="Extra files when running autoload against spark locally"
datasets/
├── starbake.db     # files are loaded as tables into the starbake schema
│   ├── order
│   ├── order_line
│   └── product
├── audit.db        # audit tables are created in the audit schema
│   ├── audit
│   └── rejected
```

## How to Use Starlake Autoload

1. **Place files in the incoming directory** -- Copy your CSV, JSON, or XML files into `$SL_ROOT/incoming/<domain>/`. The folder name becomes the database schema (domain).
2. **Name files according to conventions** -- Name each file after its target table. Add a date suffix (e.g., `order_20240228.csv`) for incremental APPEND loading. Files without a suffix are loaded in OVERWRITE mode.
3. **Run the autoload command** -- Execute `starlake autoload`. Starlake detects formats, infers schemas, stages files, and loads them into the target warehouse.
4. **Review inferred schemas** -- Check generated YAML files in `metadata/load/<domain>/` and customize column types, validation rules, or write strategies as needed.

## Frequently Asked Questions

### How does Starlake autoload detect the file format?
Autoload uses the file extension (`.csv`, `.json`, `.xml`, `.psv`, `.dsv`) and inspects the first line of the file to detect the separator and column count. For JSON, it checks if the file starts with `[` (array) or `{` (object).

### How does autoload decide between APPEND and OVERWRITE mode?
Files with a date/time suffix (e.g., `order_20240228.csv`) are loaded in APPEND mode. Files without a suffix are loaded in OVERWRITE mode.

### What happens to files that do not match any expected pattern?
Files whose names do not match a valid pattern are moved to the `datasets/unresolved/` directory. They are not loaded.

### What is the difference between a domain and a schema in Starlake?
In Starlake, "domain" refers to what databases call a schema, catalog, or dataset (depending on the engine). The folder name under `incoming/` becomes the domain name.

### Where does autoload store inferred schema files?
Schema files are generated under `metadata/load/<domain>/`. Each table gets a `<table>.sl.yml` file, and the domain gets a `_config.sl.yml` file.

### What directory structure does autoload create?
Autoload uses directories under `datasets/`: `incoming` (source), `stage` (pre-load), `ingesting` (during load), `archive` (after load), `replay` (invalid records), and `unresolved` (unmatched files).

### Does autoload work with Spark locally?
Yes. When running locally with Spark, tables are created as files in `datasets/<domain>.db/` directories, with an `audit.db/` directory for audit and rejected tables.

### What XML structure does autoload expect?
Autoload expects XML files with a root element containing repeated child elements (rows). Each child element contains sub-elements (columns) and optionally node attributes.
